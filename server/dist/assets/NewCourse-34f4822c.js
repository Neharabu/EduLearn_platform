import{a as h,j as e,L as y,b as w,u as v,r as p,A as x}from"./index-005c59a5.js";import{I as j,_ as m}from"./index-7355d82d.js";const N=({course:d})=>{const{title:r,image:a,description:o,_id:n}=d,c=h();return e.jsxs("div",{className:" relative phone:w-3/4  h-[15rem] phone:h-[17rem] my-3 mx-4 morphcard border p-3 border-gray-200 rounded-lg shadow  flex flex-col justify-between",children:[e.jsx("button",{onClick:()=>c({type:"overlay_data",payload:{login:!1,unlock:{able:!1,id:""},contact:!1,logout:!1,delete_course:{able:!0,id:n}}}),type:"button",className:"text-red-700 absolute border border-red-700 hover:bg-red-700 hover:text-white focus:ring-4 focus:outline-none bottom-2 right-2 focus:ring-red-300 font-medium rounded-full text-sm p-2.5 text-center inline-flex items-center ",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),e.jsx("img",{className:"rounded-t-lg object-fill w-full h-1/2",src:a,alt:""}),e.jsxs("div",{className:"p-1 flex flex-col h-auto justify-between",children:[e.jsx(y,{to:`/new/course/update/${n}`,href:"#",children:e.jsx("h5",{className:"mb-2 text-xl font-bold tracking-tight text-gray-100 ",children:r})}),e.jsxs("p",{className:"mb-3 font-normal text-sm text-gray-500 ",children:[o.slice(0,22),"..."]})]})]})},C=()=>{const d=w(),r=h(),{user:a}=v(t=>t.user_state_reducer),[o,n]=p.useState({title:"",image:"",description:""}),[c,g]=p.useState([]),u=t=>{const{name:s,value:l}=t.target;n(i=>({...i,[s]:l}))},f=async()=>{r({type:"loading_data",payload:!0}),await x.get("/api/v1/mycourses").then(t=>{console.log(t),t.data.success===!0&&g(t.data.courses)}).catch(t=>{var s,l;console.log(t),m.error(((l=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:l.message)||t.message)}).finally(()=>{r({type:"loading_data",payload:!1})})},b=async t=>{t.preventDefault(),console.log(o),r({type:"loading_data",payload:!0}),await x.post("/api/v1/new/course",o).then(async s=>{console.log(s),s.data.success===!0&&(m.success("Created Successfully ðŸ‘"),await f())}).catch(s=>{var l,i;console.log(s),m.error(((i=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:i.message)||(s==null?void 0:s.message))}).finally(()=>{r({type:"loading_data",payload:!1}),n({title:"",image:"",description:""})})};return p.useEffect(()=>{(a==null?void 0:a.role)!=="admin"&&d("/"),(a==null?void 0:a.role)==="admin"&&f()},[]),e.jsxs("section",{className:"w-full items-center   overflow-y-scroll hero h-screen flex flex-col",children:[e.jsx("div",{children:e.jsx(j,{})}),e.jsx("div",{className:"flex w-full h-24 p-5"}),e.jsxs("form",{className:"flex w-5/6 gap-5 p-5 morphcard flex-col",onSubmit:b,children:[e.jsxs("div",{className:"relative z-0",children:[e.jsx("input",{type:"text",id:"title",name:"title",className:"block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2 border-gray-300 appearance-none text-white  focus:outline-none focus:ring-0 focus:border-blue-600 peer",value:o.title,onChange:u,placeholder:" ",required:!0}),e.jsx("label",{htmlFor:"floating_standard",className:"absolute text-sm text-gray-100 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600  peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Course Name"})]}),e.jsxs("div",{className:"relative z-0",children:[e.jsx("input",{type:"text",id:"description",name:"description",className:"block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2 border-gray-300 appearance-none text-white  focus:outline-none focus:ring-0 focus:border-blue-600 peer",value:o.description,onChange:u,placeholder:" ",required:!0}),e.jsx("label",{htmlFor:"floating_standard",className:"absolute text-sm text-gray-200 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600  peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Course Description"})]}),e.jsxs("div",{className:"relative z-0",children:[e.jsx("input",{type:"text",id:"image",name:"image",className:"block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2 border-gray-300 appearance-none text-white dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",value:o.image,onChange:u,placeholder:" ",required:!0}),e.jsx("label",{htmlFor:"floating_standard",className:"absolute text-sm text-gray-200 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Course Image"})]}),e.jsx("button",{type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",children:"Create course"})]}),e.jsx("div",{className:"flex justify-start phone:flex-col h-[40%]  items-center w-full  phone:overflow-y-scroll overflow-x-scroll gap-5",children:c&&c.map(t=>e.jsx(N,{course:t},t._id))})]})};export{C as default};
